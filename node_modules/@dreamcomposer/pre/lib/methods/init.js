import { DcController } from "../DcController.js";
import { getAccessToken } from "./access-token.js";
import { getBaseUrl } from "./base-url.js";
export function init(idOrElement, options) {
    var _a, _b;
    const container = idOrElement instanceof HTMLElement
        ? idOrElement
        : document.getElementById(idOrElement);
    if (!(container instanceof HTMLDivElement)) {
        throw new Error("Element not found");
    }
    const baseUrl = (_a = options === null || options === void 0 ? void 0 : options.baseUrl) !== null && _a !== void 0 ? _a : getBaseUrl();
    const accessToken = (_b = options === null || options === void 0 ? void 0 : options.accessToken) !== null && _b !== void 0 ? _b : getAccessToken();
    if (accessToken === undefined) {
        throw new Error("You have to provide an access token either by setting a default one " +
            "with dc.setAccessToken(...) or by providing it directly with the " +
            "options parameter.");
    }
    return new DcController(container, {
        baseUrl: {
            pcm: typeof baseUrl === "string" ? baseUrl : baseUrl.pcm,
            embed: typeof baseUrl === "string" ? baseUrl : baseUrl.embed,
        },
        accessToken,
    });
}
