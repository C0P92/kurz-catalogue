import { ensureCallOrder } from "../util/ensure-call-order.js";
import { getPcmMaterialWithDefinition } from "./layers.js";
/**
 * Loads and sets the surface material of the geometry.
 *
 * @param dcController The DcController object obtained from the init function.
 * @param material The id of the material or the material or the material with definition.
 * @returns A promise that resolves when the surface material has been set.
 */
export const setSurfaceMaterial = ensureCallOrder(_setSurfaceMaterial);
async function _setSurfaceMaterial(dcController, material) {
    const pcmMaterialWithDefinition = await getPcmMaterialWithDefinition(dcController, material);
    if (!pcmMaterialWithDefinition.isSurfaceMaterial) {
        throw new Error(`The given material is not a surface material.`);
    }
    return dcController.postMessage({
        channel: "set-surface-material",
        payload: pcmMaterialWithDefinition.definition,
    });
}
