import { AnnotationTag } from "../AnnotationTag";
import { FromEngineMessage } from "../post-messages";

export type AnchorPosition = {
  /** 3D world position in meters */
  worldPosition: { x: number; y: number; z: number };
  /** Normalized screen position, where top left corner is `(0,0)` and bottom right `(1,1)` */
  screenPosition: { x: number; y: number };
};

/**
 * Is fired every frame to notify the embedder of the new screen position of the annotation tag.
 */
export interface AnnotationTagPositionChangedMessage
  extends FromEngineMessage<"annotation-tag-position-changed"> {
  payload: {
    tag: AnnotationTag;
    /** The anchor position that is directly attached to the object */
    objectAnchorPosition: AnchorPosition;
    /** The floating anchor position where the text label will be displayed */
    tagAnchorPosition: AnchorPosition;
    /** Normalized value where `0` is directly in front of the camera and `1` at the far end */
    depth: number;
  }[];
}
